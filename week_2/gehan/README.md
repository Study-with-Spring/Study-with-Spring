# 스프링 스터디 2주차

---

## MVC 패턴

1. 서블릿, JSP의 한계 - 유지보수 힘듦
    - 비지니스 로직과 뷰 렌더링을 모두 처리해야 하므로 결과적으로 유지보수가 힘들어짐
    - 비지니스 로직과 UI의 경우 변경 주기가 다른 데, 개발에서 변경 주기가 다른 영역들을 분리해야 유지보수가 수월해짐
    
2. Model, View, Controller
    
    : 하나의 서블릿이나 JSP로 처리하던 것을 Controller, View라는 영역으로 서로 역할을 나눈 것
    
    - **컨트롤러** : HTTP 요청을 받아 파라미터 검증 → 비지니스 로직 실행 → 뷰에 전달한 결과 데이터 조회 → 모델에 전달
    - **모델** : 뷰에 출력할 데이터를 담아둠
    - **뷰** : 모델에 담겨 있는 데이터를 사용해 렌더링 = HTML 생성, XML 생성 등
    
    ![* 컨트롤러에 비지니스 로직을 둘 수 있지만 너무 많은 역할을 담당하게 되기 때문에 추천하지 않는 방식임. 서비스라는 계층을 따로 만들어 컨트롤러에서 해당 계층을 호출하는 구조를 사용하는 것이 권장됨](%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%A5%E1%84%83%E1%85%B5%202%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%200c9945296ffb4ee8a6de4ee0db91e00b/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-02-28_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_11.02.35.png)
    
    * 컨트롤러에 비지니스 로직을 둘 수 있지만 너무 많은 역할을 담당하게 되기 때문에 추천하지 않는 방식임. 서비스라는 계층을 따로 만들어 컨트롤러에서 해당 계층을 호출하는 구조를 사용하는 것이 권장됨
    
3. 기존 코드에 MVC 모델 적용
    - **컨트롤러 : 서블릿**
    - **모델 : HttpServeltRequest 객체 사용**
        
        : request는 내부의 저장소를 보유하여 함수로(request.setAttribut(), request.getAttribute()) 해당 저장소에 데이터 보관 및 조회가 가능
        
    - **뷰 : JSP**
    - 기타 추가 정보
        1. dispatcher.forward() : 다른 서블릿이나 JSP로 이동할 수 있는 기능
            
            → 서버 내부에서 다시 호출이 발생한다? 
            
            : 클라이언트로 다시 갔다가 호출하는 것이 아니라 서버 내에서 내부적으로 다시 한 번 호출 됨
            
        2. jsp를 바로 호출하지 않고, 컨트롤러를 거쳐서 호출하도록 하는 방법
            
            : /WEB-INF 경로 내 파일들은 외부에서 직접 호출 불가능
            
        3. redirect vs forward
            - 리다이렉트 : 클라이언트에서 두 번 호출
            - 포워드 : 클라이언트에서 한 번 호출, 서부 내부에서 호출
        4. 상대 경로 (’/’없이 시작)
            
            : 이 경우 url이 속한 계층 경로 + 해당 상대 경로가 추가 됨
            
    1. MVC 패턴 한계
        - ‘포워드 중복’ → view 로 이동하는 코드가 항상 중복되어 호출됨
        - ‘viewPath 중복” → jsp 대신 thymeleaf 같은 다른 뷰로 변경 시 모든 코드르 다 변경 할 필요
        - 사용하지 않는 코드 →
        - **공통 처리가 어려움** : 컨트롤러에서 공통으로 처리하는 부분이 증가 → 해당 부분을 메서드로 뽑더라도 항상 해당 메소드 호출 필요 → 실수로 호출하지 않을 경우 문제가 됨
        
        **⇒  보완 방법 - 프론트 컨트롤러**
        
        : 컨트롤러 호출 전에 먼저 공통 기능을 처리하도록(입구를 하나로)